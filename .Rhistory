sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
rankhospital("TX", "heart failure", 4)
head(sort)
rm(list=ls())
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
rankhospital("TX", "heart failure", 4)
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort
}
head()
head(rankhospital("TX","heart failure",4))
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[data[,2]==state,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
head(rankhospital("TX","heart failure",4))
rankhospital("TX","heart failure",4)
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
data <- data[data[,7]==state,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
rankhospital("TX","heart failure",4)
data <- read.csv("outcome-of-care-measures.csv")
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[data[,7]==state,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
rankhospital("TX","heart failure",4)
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,3)]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,4)]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,5)]
}
sort[num,]
}
rankhospital("TX","heart failure",4)
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,1]
}
sort[num,]
}
rankhospital("TX","heart failure",4)
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,1]
}
slice[num,]
}
rankhospital("TX","heart failure",4)
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
dim(sort)
class(sort)
slice <- sort[sort[,2]==state,1]
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,1]
}
slice[num,]
}
rankhospital("TX","heart failure",4)
state<-"TX"
state
state<-TX
outcome<-"heart failure"
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
num<-4
data <- read.csv("outcome-of-care-measures.csv")
data <- data[,c(2,7,11,17,23)]
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,1]
}
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
srot
sort
head(sort)
slice <- sort[sort[,2]==state,1]
head(slice)
slice <- sort[sort[,2]==state,]
slice[num,]
head(slice)
slice[1:25,]
data <- read.csv("outcome-of-care-measures.csv")
s_hf<-data[,c(7,17)]
head(s_hf)
tx<-s_hf[s_hf$State=="TX",]
tx
tx<-omit.na(tx)
tx<-na.omit(tx)
tx
?na.omit
class(tx)
ctx<-na.omit(tx)
ctx
head(data)
rm(list=ls())
data <- read.csv("outcome-of-care-measures.csv")
new<-data[,c(2,7,17)]
head(new)
data <- read.csv("outcome-of-care-measures.csv")
> new<-data[,c(2,7,17)]
?rm.names
names(new)<-c("hospital","state","outcome")
head(new)
sort <- new[order(new[,3], new[,1]),]
head(sort)
sort[sort[,2]=="TX",]
class(sort[1,3])
class(sort[1,2])
class(sort[1,1])
?colClasses
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,]
}
slice[num,]
}
rankhospital("TX","heart failure", 4)
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,]
}
slice[num,1]
}
rankhospital("TX","heart failure", 4)
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
outcomes <- c("heart attack", "heart failure", "pneumonia")
#best and worst
if(!(state%in%states)){stop("invalid state")}
states <- data[,2]
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,]
}
slice[num,1]
state<-"TX"
outcome<-"heart failure"
num<-4
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
head(sort)
slice <- sort[sort[,2]==state,1]
head(slice)
slice[num,1]
dim(slice)
length(slice)
class(slice)
rankhospital <- function(state, outcome, num="best") {
#read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
#check that state and outcome are vaild
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#return first ordered value
if (outcome=="heart attack") {
sort <- data[order(data[,3], data[,1]), c(1,2,3)]
slice <- sort[sort[,2]==state,1]
}
else if (outcome=="heart failure") {
sort <- data[order(data[,4], data[,1]), c(1,2,4)]
slice <- sort[sort[,2]==state,1]
}
else {
sort <- data[order(data[,5], data[,1]), c(1,2,5)]
slice <- sort[sort[,2]==state,]
}
slice[num]
}
rankhospital("TX", "heart failure", 4)
rankhospital("MD", "heart attack", "worst")
rankhospital("MD", "heart attack", 5000)
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
