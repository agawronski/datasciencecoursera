outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state,2])}
if (num > length(data[states==state,2])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
head(rank)
dim(rank)
rank
na.omit
?na.omit
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
rm(list=ls())
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2])) {num <- return(NA)}
data[states==state,2])
data[states==state,2]
state<-"NY"
data[states==state,2]
length(data[states==state,2])
na.omit(data[states==state,2])
length(na.omit(data[states==state,2]))
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2]))) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
rankhospital("NC","heart attack",5)
rankhospital("NC","heart attack","worst")
state<-"NC"
outcome<-"heart attack"
num<-"worst"
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2]))) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
head(odata)
head(sodata)
tail(sodata)
class(rankhospital("NC","heart attack","worst"))
tail(data)
data[states==state,2]
length(data[states==state,2])
states
data(states==state,)
data[states==state,]
head(data[states==state,])
state<-"NC"
head(data[states==state,])
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(na.omit(data[states==state,2]))}
if (num > length(na.omit(data[states==state,2]))) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
head(data)
tail(data)
colClasses(data)
colclasses(data)
colclass(data)
?colclasses
head(states)
tail(states)
states
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
##  if (num > length(na.omit(data[states==state,2]))) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
rankhospital("NC","heart attack","worst")
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
rankhospital("NC","heart attack","worst")
rankhospital("NC","heart attack",180)
rankhospital("NC","heart attack",100)
rankhospital("NC","heart attack",60)
rankhospital("NC","heart attack",30)
rankhospital("NC","heart attack",15)
rankhospital("NC","heart attack",6)
rankhospital("NC","heart attack",1)
rankhospital("NC","heart attack",2)
rankhospital("NC","heart attack",3)
rankhospital("NC","heart attack",4)
rankhospital("NC","heart attack",5)
rankhospital("NC","heart attack",6)
submit()
rm(list=ls())
## Rank hospitals by outcome in a state
## write a function called "rankhospital"
## state (eg. "NY"), outcome (eg. "pneumonia"), num (eg. "2")
## rankhospital reads "outcome-of-care-measures.csv"...
## returns a character vector with the hospital specified by num
## with the lowest 30 day mort for the specified outcome
## num can accept "best" "worst" or an integer
## num > hospitals in state returns NA
## ties settled by alphabetical hospital name
rankhospital <- function(state, outcome, num="best"){
##Read outcome data
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else if (outcome=="heart failure") {
odata <- data[order(data[,4]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
else {
odata <- data[order(data[,5]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
match
}
source("submitscript3.R")
submit()
rankhospital("TX","heart failure",4)
rankhospital("MD","heart attack","worst")
state<-"NC"
outcome<-"heart attack"
num<-"worst"
data <- read.csv("outcome-of-care-measures.csv", colClasses="character")
data <- data[,c(2,7,11,17,23)]
data[,c(3,4,5)] <- sapply(data[,c(3,4,5)], as.numeric)
names(data) <- c("hospitals","states","heart attack","heart failure","pneumonia")
##check that state and outcome are valid
states <- data[,2]
outcomes <- c("heart attack", "heart failure", "pneumonia")
if(!(state%in%states)){stop("invalid state")}
if(!(outcome%in%outcomes)) {stop("invalid outcome")}
#best and worst
if (num == "best") {num <- 1}
if (num == "worst") {num <- length(data[states==state & data[,outcome]!="NA",])}
if (num > length(data[states==state & data[,outcome]!="NA",])) {num <- return(NA)}
#order by alphabet
data <- data[order(data[,1]),]
##return hospital name in that state with the given rank
##30-day mort rate
if(outcome=="heart attack"){
odata <- data[order(data[,3]),]
sodata <- odata[odata[,2]==state,c(1,3)]
n <- nrow(sodata)
rank <- cbind(sodata,1:n)
match <- rank[rank[,3]==num,1]
}
length(data[states==state & data[,outcome]
)
length(data[states==state & data[,outcome]!="NA",])
dim(data)
dim(data[states==state,])
head(data[states==state,])
